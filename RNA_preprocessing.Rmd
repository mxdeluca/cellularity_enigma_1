---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
batches.RNA <- read_delim("~/Downloads/e6665e30546434303dd06d1c296a30ac-data 2/original/batches.tsv", 
     delim = "\t", escape_double = FALSE, 
    trim_ws = TRUE)
batches.RNA$Sample_Name <- rapply(f = paste, object = lapply(strsplit(x = batches.RNA$Sample, split = "-"),"[",1:4),collapse = "-")
```
# read in the methylation data 
```{r}
TCGA.BRCA.htseq_counts.tsv.gz <- read.delim("~/Desktop/post_doc/TCGA-BRCA.htseq_counts.tsv.gz.tsv")
samples.RNA.df <- as.data.frame(colnames(TCGA.BRCA.htseq_counts.tsv.gz)[-1])
colnames(samples.RNA.df) <- "Sample_Name"
samples.RNA.df$Sample_Name <- gsub(pattern = "\\.",replacement = "-",x = samples.RNA.df$Sample_Name)
samples.RNA.df$Patient <- rapply(f = paste,object = lapply(strsplit(split = "-", samples.RNA.df$Sample_Name),"[",1:3),collapse = "-")
# check which one has batch data 
length(which(samples.RNA.df$Patient %in% batches.RNA$Patient)) # 1216 samples 

## rename  the dataframe 
colnames(TCGA.BRCA.htseq_counts.tsv.gz)  <-  gsub(pattern = "\\.",replacement = "-",x = colnames(TCGA.BRCA.htseq_counts.tsv.gz))
row.names(TCGA.BRCA.htseq_counts.tsv.gz) <- TCGA.BRCA.htseq_counts.tsv.gz$Ensembl_ID
TCGA.BRCA.htseq_counts.tsv.gz$Ensembl_ID <- NULL

TCGA.BRCA.htseq_counts.fil <- TCGA.BRCA.htseq_counts.tsv.gz[,which(colnames(TCGA.BRCA.htseq_counts.tsv.gz) %in% batches.RNA$Sample_Name)]
dim(TCGA.BRCA.htseq_counts.fil)  # 60488  1217  ## sample batch info available for all samples! 
save(TCGA.BRCA.htseq_counts.fil,file = "TCGA.BRCA.htseq_counts.fil.Rdata")
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

